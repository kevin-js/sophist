<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sophist Profile Page</title>

        <!-- Font -->
        <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'> 

        <!-- Our CSS -->
        <link rel="stylesheet" type="text/css" href="css/ashStyle.css">

        <!-- Parse JS -->
        <script src="//www.parsecdn.com/js/parse-1.6.14.min.js"></script>
        
        <!-- JQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery.js"></script>

        <!-- JQuery UI -->
        <link href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" rel="stylesheet">
        <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

        <!-- App JS -->
        <script type="text/javascript" src='js/tutor.js'></script>

        <!-- Jasny -->
        <link href="css/jasny-bootstrap.min.css" rel="stylesheet" media="screen">
        <script src="js/jasny-bootstrap.min.js"></script>

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

        <!--User Permission Check-->
        <script type="text/javascript">

            //Parse.initialize("ZHukiaayDifZY0UZ4QbW3P3ma5CzTZ5iKNh4PJQL", "mskSrhfGMXijKMXWnHQSlTM4RcN9YPCcZpa0n7Wb");
            
            // the main app testing key
            Parse.initialize("nwM6OmQqbuqz6k9NdHf1oqMGuG8GEASFyJbwCUEV", "2m4qPaoKmEBqsrGLPcAWGUwNHLlZ53JruXGHela9");

            var currentUser = Parse.User.current();

            if (currentUser != null) {
                //alert("You are logged in!");
            } else {
                window.location.replace("http://www.mysophist.com/index.html");
            }

            // For autofill...
            $(function() {
                searchCourses();
                profPic();
                sendUserDemand();
                sendUserOffering();
            });

        </script>


    <script type="text/javascript">
        function jumpToSection(event, targetSection){
            event.preventDefault();
            var controlString = null;
            switch(targetSection){
                case 's1':
                controlString = '#bio1';
                break;
                case 's2':
                controlString = '#course1';
                break;
                case 's3':
                controlString = '#course2';
                break;
                case 'name':
                controlString = '#splash';
                break;
                default:
                controlString = '#';
            }
            var sectionOffset = $(controlString).offset().top;
                $('body,html').animate({
                scrollTop : sectionOffset + 1
                }, 1000);
        }
    </script>



    </head>
  
    <body>

        <nav id="myNavmenu" class="navmenu navmenu-default navmenu-fixed-right offcanvas" role="navigation">
          <ul class="nav navmenu-nav">
            <li><a id="team" class="menutab topOfList" href="#">Team</a></li>
            <li><a id="about" class="menutab" href="#">About</a></li>

            <li><a id="logout" onclick="logOut()" class="menutab" href="#">Log Out</a></li>
          </ul>
        </nav>

        <div class="navbar navbar-fixed-top login-nav">
          <a id = "index" class="navbar-brand" href="#">Sophist</a>
          <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target="#myNavmenu" data-canvas="body">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>

        <div class="container">

            <form class="profile-form profile-content">
                
                <div class="row bioContainer">
                    <div class="col-xs-4">

                    	<div class="photoContainer">
                            <!-- <img src="images/placeholder.jpg" id="profpic" alt="User" class="user-image"> -->
                            <div class="photo" id="profpic" alt="User" class="user-image">
                                <div id="overlay">
                                    <span id="updatePic" class="btn fileinput-button">Update photo
                                        <span class="glyphicon glyphicon-camera"></span>
                                        <input type="file" name="file" id="fileselect">
                                    </span>
                                </div>
  
                            </div>
                        </div>

           <!--              <div class="photoContainer">
                            <img src="placeholder.jpg" id="profpic" alt="User" class="user-image">
                        </div>

                        <br> -->
                        <!-- <input type="file" name="fileselect" id="fileselect"></input> -->
        <!--                 <form method="POST" action="myurl"> 
                            <span class="btn fileinput-button fontFormat high">
                                Edit profile picture
                                <span class="glyphicon glyphicon-pencil high" aria-hidden="true"></span>


                                <input type="file" name="file" id="fileselect">
                            </span>
                        </form> -->

                    </div>

                    <div class="col-xs-8 bioDiv">
                        <span id="fullname" class="full-name fontFormat" value="Full Name">Melissa Ashley Lord</span>
                        
                        <script type="text/javascript">
                            var user = Parse.User.current();
                            var fullname = user.get("fullname");
                            var msg = "Welcome " + fullname + "!";
                            $("#fullname").text(msg);
                        </script>

                        <br>
                        <div id="s1" onclick="jumpToSection(event, this.id)"> 
                            <span id="foo" class="BIO fontFormat high">
                                Abbreviated Bio
                            </span>
                            <i id="pencil-glyph" class="glyphicon glyphicon-pencil high2 hidden"></i>
                        </div>


                        <script>
                        $('#foo').hover(function () {
                            $('#pencil-glyph').removeClass('hidden'); 
                        }, function () {
                            $('#pencil-glyph').addClass('hidden');
                        });
                        </script>


                         <div id="s2" onclick="jumpToSection(event, this.id)"> 
                            <span id="foo1" class="BIO fontFormat high">
                                Courses Needed
                            </span>
                            <i id="pencil-glyph1" class="glyphicon glyphicon-pencil high2 hidden"></i>
                        </div>

                        <script>
                        $('#foo1').hover(function () {
                            $('#pencil-glyph1').removeClass('hidden'); 
                        }, function () {
                            $('#pencil-glyph1').addClass('hidden');
                        });
                        </script>



                        <div id="s3" onclick="jumpToSection(event, this.id)"> 
                            <span id="foo2" class="BIO fontFormat high">
                                Courses Willing
                            </span>
                            <i id="pencil-glyph2" class="glyphicon glyphicon-pencil high2 hidden"></i>
                        </div>

                        <script>
                        $('#foo2').hover(function () {
                            $('#pencil-glyph2').removeClass('hidden'); 
                        }, function () {
                            $('#pencil-glyph2').addClass('hidden');
                        });
                        </script>



                    </div>

                </div>

            </form>

            <div id="bio1" class="row bioContainer">
                <div class="col-xs-4">
                    <span class="fontFormat divLabel">Update your bio!</span>
                    <br>
                    <div class="textContainer" contenteditable>

                        <div class="fillout">
                            <span class="fontFormat bioLabel">School:</span>
                            <input class="textbox" id="profile-bio" value=""></input>
                        </div>

                        <div class="fillout">
                            <span class="fontFormat bioLabel">Major:</span>
                            <input class="textbox" id="profile-bio" value=""></input>
                        </div>

                        <script type="text/javascript">
                            var user = Parse.User.current();
                            var bio = user.get("bio");
                            $("#profile-bio").val(bio);
                            //$("#profile-bio").attr("value", bio).placeholder();
                        </script>
                    </div>
                </div>

                <div class="col-xs-4">
                <br>
                    <div class="textContainer" contenteditable>
                        <div class="fillout">
                            <span class="fontFormat bioLabel">Year:</span>
                            <input class="textbox" id="profile-bio" value=""></input>
                        </div>
                        <div class="fillout">
                            <span class="fontFormat bioLabel">Minor:</span>
                            <input class="textbox" id="profile-bio" value=""></input>
                        </div>
                    </div>
                </div>

                <div class="col-xs-4">
                    <br>
                    <div class="textContainer" contenteditable>
                        <div class="fillout">
                            <span class="fontFormat bioLabel">Age:</span>
                            <input class="textbox" id="profile-bio" value=""></input>
                        </div>
                    </div>
                    <button class="bioButton fontFormat" type="submit">Submit Changes</button>
                </div>
            </div>


            <div id="course1" class="row bioContainer1">

                    <div class="row"><span class="fontFormat updateLabel divLabel">Update courses in need of a tutor!</span></div>
                    <form class="row" id="demand" role="form" action="/wohoo" method="POST">
                        <div class="demands"></div>
                        <div class="col-xs-12">
                            <br>
                            <div class="row">
                                <div class="col-xs-6">
                                    &nbsp&nbsp&nbsp&nbsp<span class="fontFormat">Course name:</span>
                                </div>
                                <div class="col-xs-6">
                                    <span class="fontFormat">Price (optional):</span>
                                </div>
                            </div>
                            <div class="multi-field-wrapper1 row">
                                <div class="col-xs-12">
                                  <div class="multi-fields1">
                                    
                                        <div class="multi-field1">
                                          
                                          &nbsp&nbsp&nbsp&nbsp<input id="courseNameDemand" class="coursebox"></input>

                                           &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<input id="priceDemand" class="coursebox">
                                            <button type="button" class="btn xButton remove-field1"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>    
                                          </input>

                                        </div>
                                    
                                  </div>
                                </div>
                            <input class="courseButton add-field1" type="button" value="Add Course" />

                          </div>
                        </div>
                    </form>

                    <input class="courseSubmit" type="button" value="Submit Changes" onclick="sendOffering()"></input>


                    <script>
                        $('.multi-field-wrapper1').each(function() {
                            var $wrapper = $('.multi-fields1', this);
                            $(".add-field1", $(this)).click(function(e) {
                                $('.multi-field1:first-child', $wrapper).clone(true).appendTo($wrapper).find('input').val('').focus();
                            });
                            $('.multi-field1 .remove-field1', $wrapper).click(function() {
                                if ($('.multi-field1', $wrapper).length > 1)
                                    $(this).parent('.multi-field1').remove();
                            });
                        });
                    </script>

            </div>

            <!-- <div id="course1" class="row bioContainer1">

                <form id="demand">
                    <div class="demands"></div>
                    <span class="fontFormat divLabel">Update courses in need of a tutor!</span>

                    <br>
                    <br>

                    <div id="demand_fields">
                        <br>
                        <div class="content">
                            <div id="addCourse" class="col-xs-6">
                                <div><span class="fontFormat">Course name:</span>
                                </div>
                                <div><input class="coursebox" id="courseNameDemand"></input></div>

                            </div>
                            <div id="addCoursse" class="col-xs-6">
                                <div><span class="fontFormat">Price (optional):</span></div>
                                <div><input class="coursebox" id="priceDemand"><button class="btn xButton"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></input></div>
                            </div>
                        </div>

                    </div>

                    <input class="courseButton" type="button" id="more_fields" onclick="add_fields();" value="Add Course" />

                    <input class="courseSubmit" type="button" value="Submit Changes" onclick="sendDemandToProfile()"></input>

                </form>


                <script>
                    var demand = 1;
                    function add_fields() {
                        demand++;
                        var objTo = document.getElementById('demand_fields')
                        var divtest = document.createElement("div");
                        divtest.innerHTML = '<div class="content"><div id="addCourse" class="col-xs-6"><div></div><div><input class="coursebox" id="courseNameDemand"></input></div></div><div id="addCoursse" class="col-xs-6"><div></div><div><input class="coursebox" id="priceDemand"><button class="btn xButton"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></input></div></div></div>';
                        
                        objTo.appendChild(divtest)
                    }
                </script>

            </div> -->

                <div id="course2" class="row bioContainer1">

                    <div class="row"><span class="fontFormat updateLabel divLabel">Update courses willing to tutor!</span></div>
                    <form class="row" id="offer" role="form" action="/wohoo" method="POST">
                        <div class="col-xs-12">
                            <br>
                            <div class="row">
                                <div class="col-xs-6">
                                    &nbsp&nbsp&nbsp&nbsp<span class="fontFormat">Course name:</span>
                                </div>
                                <div class="col-xs-6">
                                    <span class="fontFormat">Price (optional):</span>
                                </div>
                            </div>
                            <div class="multi-field-wrapper row">
                                <div class="col-xs-12">
                                  <div class="multi-fields">
                                    
                                        <div class="multi-field">
                                          
                                          &nbsp&nbsp&nbsp&nbsp<input id="courseNameOffer" class="coursebox"></input>

                                           &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<input id="priceOffer" class="coursebox">
                                            <button type="button" class="btn xButton remove-field"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>    
                                          </input>

                                        </div>
                                    
                                  </div>
                                </div>
                            <input class="courseButton add-field" type="button" value="Add Course" />

                          </div>
                        </div>
                    </form>

                    <input class="courseSubmit" type="button" value="Submit Changes" onclick="sendOffering()"></input>


                    <script>
                        $('.multi-field-wrapper').each(function() {
                            var $wrapper = $('.multi-fields', this);
                            $(".add-field", $(this)).click(function(e) {
                                $('.multi-field:first-child', $wrapper).clone(true).appendTo($wrapper).find('input').val('').focus();
                            });
                            $('.multi-field .remove-field', $wrapper).click(function() {
                                if ($('.multi-field', $wrapper).length > 1)
                                    $(this).parent('.multi-field').remove();
                            });
                        });
                    </script>

            </div>

        </div>






        <!--Links JS-->
        <script type="text/javascript" src="js/links.js"></script>
    </body>

</html>

